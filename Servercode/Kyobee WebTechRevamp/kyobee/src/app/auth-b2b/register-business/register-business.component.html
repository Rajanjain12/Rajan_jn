<div class="custom-container">
  <div class="container">
    <form name="form" #f="ngForm" class="mt-3" (ngSubmit)="(f.form.valid)" novalidate>
      <div class="row m-0" *ngIf="addBusinessFlag == false">
        <div class="col-12">
          <h4 class="text-center mb-3">Register Your Business</h4>
        </div>
        <div class="col-12 row m-0 mb-4">
          <div class="col-12 col-sm-6 col-md-4 col-xl-3 ml-auto mr-md-3">
            <div class="mobile-input-with-flag row m-0">
              <label for="input" class="col-12 m-0 pl-0 control-label-flag medium-gray-color"> Select Country</label>
              <div class="col-auto pl-0 form-group countryCode-flag">
                <img src="/assets/images/flag_placeholder.png" class="flag flag-{{ countryCode | lowercase }}" />
              </div>
              <div class="col p-0 form-group">
                <select name="countryCode" id="countryCode" [(ngModel)]="countryCode">
                  <option *ngFor="let country of countryList" value="{{ country.isocode | lowercase }}">{{ country.countryName }}</option>
                </select>
                <i class="bar"></i>
              </div>
            </div>
          </div>

          <div class="col-12 col-sm-6 col-md-4 col-xl-3 mr-auto ml-md-3">
            <label for="input" class="col-12 m-0 pl-0 control-label medium-gray-color">&nbsp;</label>
            <div class="form-group m-0">
              <input type="text" name="zip" class="form-control" id="zip" [(ngModel)]="zipCode" #zip="ngModel" [ngClass]="{ 'is-invalid': f.submitted && zip.invalid }" maxlength="8" required />
              <label for="people" class="control-label">Zip Code*</label>
              <i class="bar"></i>
              <div *ngIf="f.submitted && zip.invalid" class="invalid-feedback">
                <div class="text-danger" *ngIf="zip.errors?.required">Zipcode is required</div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-12 px-2">
          <div class="form-group my-3">
            <i class="fi flaticon-search"></i>
            <input
              type="text"
              id="search"
              name="search"
              #search="ngModel"
              placeHolder="Search your Business"
              [ngClass]="{ 'is-invalid': f.submitted && search.invalid }"
              class="form-control search-input"
              [(ngModel)]="searchKeyword"
              required
            />
            <div *ngIf="f.submitted && search.invalid" class="invalid-feedback">
              <div class="text-danger" *ngIf="search.errors?.required">Business name is required</div>
            </div>
            <!-- <label for="input" class="control-label">Last Name</label><i class="bar"></i> -->
            <!-- <div *ngIf="f.submitted && lastName.invalid" class="invalid-feedback"> -->
            <!-- <div class="text-danger" *ngIf="lastName.errors?.required">Business Name is required</div> -->
            <!-- </div> -->
          </div>
          <!-- <div class="ng-autocomplete auth-b2b-autocomplete">
            <ng-autocomplete
              [data]="placeList"
              [searchKeyword]="'placeName'"
              placeHolder="Search your Business"
              [debounceTime]="200"
              [disabled]="!showBusiness"
              (inputChanged)="fetchPlaceList($event)"
              (inputCleared)="searchCleared()"
              historyIdentifier="placeList"
              (selected)="fetchPlaceDetails($event)"
              [itemTemplate]="itemTemplate"
            >
            </ng-autocomplete>
            <i class="fi flaticon-search"></i>
            <ng-template #itemTemplate let-item>
              <a [innerHTML]="item.placeName"></a>
            </ng-template>
          </div> -->
        </div>
        <div class="col-12 text-center mb-3 px-2">
          <button _ngcontent-onx-c7="" class="btn btn-theme background-color shadow w-auto" type="submit" (click)="validate(f.form.invalid)">Search</button>
        </div>
        <div class="col-12 px-2">
          <ul class="search-list">
            <li *ngFor="let place of placeList">
              <a (click)="fetchPlaceDetails(place)">{{ place.placeName }}</a>
            </li>
            <!--  <li><a href="#">The Imperial Palace summertime ln, Culver City, CA,90230</a></li>
            <li><a href="#">The Imperial Palace summertime ln, Culver City, CA,90230</a></li>
            <li><a href="#">The Imperial Palace summertime ln, Culver City, CA,90230</a></li>
            <li><a href="#">The Imperial Palace summertime ln, Culver City, CA,90230</a></li>
            <li><a href="#">The Imperial Palace summertime ln, Culver City, CA,90230</a></li>-->
          </ul>
        </div>
        <div class="col-12 text-center mt-3">
          <button type="button" class="btn btn-underline font-color not-finding" (click)="addBusinessFlag = !addBusinessFlag; fetchOrganizationType()">
            Not finding?
          </button>
        </div>
      </div>
      <div class="row fade-in" *ngIf="addBusinessFlag == true">
        <div class="col-12">
          <h4 class="text-center mb-3">Add Business</h4>
        </div>
        <div class="row col-12 container-box px-4 py-3">
          <div class="col-12 col-md-6">
            <div class="form-group my-3">
              <input
                type="text"
                id="businessName"
                name="businessName"
                #businessName="ngModel"
                [ngClass]="{ 'is-invalid': f.submitted && businessName.invalid }"
                class="form-control"
                [(ngModel)]="organization.organizationName"
                maxlength="50"
                required="required"
              />
              <label for="input" class="control-label">Business Name*</label><i class="bar"></i>
              <div *ngIf="f.submitted && businessName.invalid" class="invalid-feedback">
                <div class="text-danger" *ngIf="businessName.errors?.required">Business Name is required</div>
              </div>
            </div>
          </div>
          <div class="col-12 col-md-6">
            <div class="form-group my-3">
              <input
                type="text"
                id="businessPhoneNumber"
                name="businessPhoneNumber"
                mask="(000)-000-0000"
                [ngClass]="{ 'is-invalid': f.submitted && businessPhoneNumber.invalid }"
                #businessPhoneNumber="ngModel"
                class="form-control"
                [(ngModel)]="organization.primaryPhone"
                maxlength="8"
                required="required"
              />
              <label for="input" class="control-label">Business Phone Number*</label><i class="bar"></i>
              <div *ngIf="f.submitted && businessPhoneNumber.invalid" class="invalid-feedback">
                <div class="text-danger" *ngIf="businessPhoneNumber.errors?.required">Business Phone Number is required</div>
              </div>
            </div>
          </div>
          <div class="col-12">
            <div class="form-group my-3">
              <input
                type="text"
                id="streetAddress"
                name="streetAddress"
                #streetAddress="ngModel"
                [ngClass]="{ 'is-invalid': f.submitted && streetAddress.invalid }"
                class="form-control"
                maxlength="100"
                [(ngModel)]="organization.addressDTO.addressLineOne"
              />
              <label for="input" class="control-label">Street Address</label><i class="bar"></i>
              <div *ngIf="f.submitted && streetAddress.invalid" class="invalid-feedback">
                <!-- <div class="text-danger" *ngIf="streetAddress.errors?.required">Street Address is required</div> -->
              </div>
            </div>
          </div>
          <div class="col-12 col-md-6">
            <div class="form-group my-3">
              <select name="IndustryInfo" id="IndustryInfo" [(ngModel)]="organization.orgTypeId">
                <option *ngFor="let orgTypeList of organizationTypeList" value="{{ orgTypeList.typeID }}">{{ orgTypeList.typeName }}</option>
              </select>
              <label for="input" class="control-label">Industry info</label><i class="bar"></i>
            </div>
          </div>
          <div class="col-12 col-md-6">
            <div class="form-group my-3">
              <input type="text" id="city" name="city" #city="ngModel" [ngClass]="{ 'is-invalid': f.submitted && city.invalid }" class="form-control" [(ngModel)]="organization.addressDTO.city" required="required" />
              <label for="input" class="control-label">City</label><i class="bar"></i>
            </div>
          </div>
          <div class="col-12 col-md-6">
            <div class="form-group my-3">
              <input type="text" id="state" name="state" #state="ngModel" [ngClass]="{ 'is-invalid': f.submitted && state.invalid }" class="form-control" [(ngModel)]="organization.addressDTO.state" required="required" />
              <label for="input" class="control-label">State</label><i class="bar"></i>
            </div>
          </div>
          <div class="col-12 col-md-6 form-group my-3">
            <div class="col-12">
              <label for="input" class="control-label has-value-label"> Country</label>
            </div>
            <div class="mobile-input-with-flag row m-0">
              <div class="col-auto pl-0 form-group countryCode-flag">
                <img src="/assets/images/flag_placeholder.png" class="flag flag-{{ countryCode | lowercase }}" />
              </div>
              <div class="col p-0 form-group">
                <select name="countryCode" id="countryCode" [(ngModel)]="countryCode">
                  <option *ngFor="let country of countryList" value="{{ country.isocode | lowercase }}">{{ country.countryName }}</option>
                </select>
                <i class="bar"></i>
              </div>
            </div>
          </div>
          <div class="col-12 col-md-6">
            <div class="form-group my-3">
              <input type="text" name="zip1" class="form-control" id="zip1" #zip1="ngModel" [ngClass]="{ 'is-invalid': f.submitted && zip1.invalid }" [(ngModel)]="zipCode" maxlength="8" />
              <label for="people" class="control-label">Zip Code*</label>
              <i class="bar"></i>
              <div *ngIf="f.submitted && zip1.invalid" class="invalid-feedback">
                <!-- <div class="text-danger" *ngIf="zip1.errors?.required"> Zipcode is required</div> -->
              </div>
            </div>
          </div>
          <div class="col-12 col-md-6">
            <div class="form-group my-3">
              <select name="timezone" id="timezone" [(ngModel)]="addBusiness.timezone">
                <option value="-11:00">Pacific/Midway (GMT-11:00)</option>
                <option value="5:00">5:00</option>
              </select>
              <label for="input" class="control-label">Time zone</label><i class="bar"></i>
            </div>
          </div>
        </div>
        <div class="col-12 text-center mt-4">
          <button type="submit" class="btn btn-theme background-color shadow w-auto" (click)="registerBusiness()">Save</button>
        </div>
      </div>
    </form>
  </div>
</div>
